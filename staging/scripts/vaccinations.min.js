vaccine("https://api.coronavirus.data.gov.uk/v1/data?"+"filters=areaType=overview&"+"structure={"+'"date":"date",'+'"newPeopleVaccinatedFirstDoseByPublishDate":"newPeopleVaccinatedFirstDoseByPublishDate",'+'"cumPeopleVaccinatedFirstDoseByPublishDate":"cumPeopleVaccinatedFirstDoseByPublishDate",'+'"newPeopleVaccinatedSecondDoseByPublishDate":"newPeopleVaccinatedSecondDoseByPublishDate",'+'"cumPeopleVaccinatedSecondDoseByPublishDate":"cumPeopleVaccinatedSecondDoseByPublishDate"'+"}");async function vaccine(e){const t=await fetch(e);const o=await t.json();const a=o.data.reverse();const r=[],l=[],s=[],u=[],c=[],d=[],n=[];for(let e=0;e<a.length;e++){const F=new Date(a[e].date);c.push(F.getDate()+"-"+(F.getMonth()+1));r.push(a[e].newPeopleVaccinatedFirstDoseByPublishDate);l.push(a[e].cumPeopleVaccinatedFirstDoseByPublishDate);s.push(a[e].newPeopleVaccinatedSecondDoseByPublishDate);u.push(a[e].cumPeopleVaccinatedSecondDoseByPublishDate);d.push(a[e].cumPeopleVaccinatedFirstDoseByPublishDate-a[e].cumPeopleVaccinatedSecondDoseByPublishDate);n.push(ukAdultPopulation-a[e].cumPeopleVaccinatedFirstDoseByPublishDate)}let i=doAvg(r,[null,null,null,null]);let h=doAvg(s,[null,null,null,null]);let D=[];let y=[];for(let e=0;e<7*11;e++){D.push(null)}for(let e=0;e<l.length;e++){D.push(l[e])}for(let e=0;e<7*11;e++){D.push(null)}for(let e=7*11;e<u.length;e++){y.push(u[e])}let b=[null,null,null,null];for(let e=0;e<i.length;e++){b.push(i[e+4]+h[e+4])}let g=dataSet("Daily First Dose",chartColours[darkmode][colourSequence][4][3],"rgb(0, 0, 0)",r,"bar");let S=dataSet("Daily Second Dose",chartColours[darkmode][colourSequence][4][3],"rgb(0, 0, 0)",s,"bar");let p=dataSet("Daily Second Dose",chartColours[darkmode][colourSequence][1][2],"rgb(0, 0, 0)",s,"bar");let m=dataSet("First Dose 7 Day Average","rgba(0, 0, 0, 0)",chartColours[darkmode][colourSequence][4][2],i,"line");let k=dataSet("Second Dose 7 Day Average","rgba(0, 0, 0, 0)",chartColours[darkmode][colourSequence][4][2],h,"line");let P=dataSet("Second Dose 7 Day Average","rgba(0, 0, 0, 0)",chartColours[darkmode][colourSequence][4][2],b,"line");let C=dataSet("Cumulative First Dose",chartColours[darkmode][colourSequence][4][3],"rgb(0, 0, 0)",l,"bar");let A=dataSet("Cumulative Second Dose",chartColours[darkmode][colourSequence][1][2],"rgb(0, 0, 0)",u,"bar");let v=dataSet("Cumulative Second Dose",chartColours[darkmode][colourSequence][1][2],"rgb(0, 0, 0)",y,"bar");let x=dataSet("Cumulative First Dose Only",chartColours[darkmode][colourSequence][4][3],"rgb(0, 0, 0)",d,"bar");let B=dataSet("Un-vaccinated Population",chartColours[darkmode][0][0][6],"rgb(0, 0, 0)",n,"bar");chartWithTag("firstDoseDaily","bar",c,[m,g],{scales:{xAxes:[{stacked:true,gridLines:{display:true,color:chartStyleColours[darkmode][0]}}],yAxes:[{stacked:true,ticks:{beginAtZero:true},gridLines:{display:true,color:chartStyleColours[darkmode][0]}}]}});chartWithTag("secondDoseDaily","bar",c,[k,S],{scales:{xAxes:[{stacked:true,gridLines:{display:true,color:chartStyleColours[darkmode][0]}}],yAxes:[{stacked:true,ticks:{beginAtZero:true},gridLines:{display:true,color:chartStyleColours[darkmode][0]}}]}});chartWithTag("bothDosesDaily","bar",c,[P,g,p],{scales:{xAxes:[{stacked:true,gridLines:{display:true,color:chartStyleColours[darkmode][0]}}],yAxes:[{stacked:true,ticks:{beginAtZero:true},gridLines:{display:true,color:chartStyleColours[darkmode][0]}}]}});chartWithTag("bothDosesCumSubSecond","bar",c,[A,x],{scales:{xAxes:[{stacked:true,gridLines:{display:true,color:chartStyleColours[darkmode][0]}}],yAxes:[{stacked:true,ticks:{beginAtZero:true},gridLines:{display:true,color:chartStyleColours[darkmode][0]}}]}});chartWithTag("bothDosesCumSubSecond2","bar",c,[v,C]);chartWithTag("bothDosesCum","bar",c,[C,A],{scales:{xAxes:[{stacked:true,gridLines:{display:true,color:chartStyleColours[darkmode][0]}}],yAxes:[{stacked:true,ticks:{beginAtZero:true},gridLines:{display:true,color:chartStyleColours[darkmode][0]}}]}});chartWithTag("percentPop","bar",c,[A,x,B],{scales:{xAxes:[{stacked:true,gridLines:{display:true,color:chartStyleColours[darkmode][0]}}],yAxes:[{stacked:true,ticks:{beginAtZero:true},gridLines:{display:true,color:chartStyleColours[darkmode][0]}}]}});valReturnSet([["firstDose",numberWithCommas(l[l.length-1])],["percFirstDose",Math.round(l[l.length-1]/ukPopulation*1e4)/100],["percAdultFirstDose",Math.round(l[l.length-1]/ukAdultPopulation*1e4)/100],["currentSevenDayFirstDose",numberWithCommas(Math.round(i[i.length-1]))],["secondDose",numberWithCommas(u[u.length-1])],["percSecondDose",Math.round(u[u.length-1]/ukPopulation*1e4)/100],["percAdultSecondDose",Math.round(u[u.length-1]/ukAdultPopulation*1e4)/100],["currentSevenDaySecondDose",numberWithCommas(Math.round(h[h.length-1]))]])}